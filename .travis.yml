jobs:
  include:
  - os: linux
    dist: bionic
    name: Ubuntu 18.04 Tests
    language: python
    python: 3.6
    before_script: pip3 install -r requirements.txt
    script: nosetests
    before_deploy: scripts/build_ubuntu1804.sh
  - os: linux
    dist: focal
    name: Ubuntu 20.04 Tests
    language: python
    python: 3.6
    before_script: pip3 install -r requirements.txt
    script: nosetests
    before_deploy: scripts/build_ubuntu2004.sh
  - os: osx
    name: Mac 10.15 Tests
    osx_image: xcode11.4
    before_script: pip3 install --user -r requirements.txt
    script: "/Users/travis/Library/Python/3.7/bin/nosetests"
    before_deploy: scripts/build_mac.sh
  - os: windows
    language: cpp
    name: Windows Tests
    before_script:
    - choco install 7zip
    - choco install python --version 3.6.8
    - pip3 install -r requirements.txt
    script: nosetests
    before_deploy: scripts/build_windows.sh
    env: PATH=/c/Python36:/c/Python36/Scripts:$PATH
  - os: linux
    dist: bionic
    name: Flake8
    language: python
    python: 3.6
    before_script: pip3 install -r requirements.txt
    script: flake8 epregressions
deploy:
  provider: releases
  api_key:
    secure: dtm5qvOwBnYI37k0X5bQ1tJweOs5UTV65vv1vGa+TaU8eAE1KHmTIhNedZg7aRWYSpLRz/hdhGPjVBxid7VIvtIqFI4HX6wJ9Mf6aFL6uoFM5mUhtBrBo7TkcYG+oSQ5eftCDVO0449iKi0mzXgfl5szNXns1/VthK15+MGBQr12hNu+l0aWG3gWyweUnpJ3x4nORXU01v3yLTl+4J/UNOBzJvziXNub/7idF+v//hsoesLJuwKUjUBRmCackTFEiO/t9Atr4fMbI9Fksd+8TBaYplwz6ZwqKKtI1itrAe9af2PRTic7ZWmLI36U5KrGkH6yERFY2MAOgwHmirlkKfPknW1zLxaBMtgimdMhM9iVhNShC6+D1OpwFxiQEleQvS7ASFGLHeBuK2YK5QTH/4e9j1hGcaIrBg/J3JCPr9EYcqS2shUu0DxOyfQzI/M5vWDcY/suwZb0hijqXYDg9T+qIxdmlzV7RFwj6cSsVKvpLJSoAgZmoEAruze+iCp4jKdP/mEyvslbcLYt4MeGv8BydcX6jaLTgqMFYg3cZuWKATT6KVc6DaaL+Ptc5kIhw7GHMfkFyVe9lRAKiDDvvV1VIrnSyYcJ1m+i5XdSe5/IeCMuj0aTx1iTa0gi4CoKLIdWYvAbbGGjj9s8VT7nxH4c4WPosKabPyM1pt7MDPk=
  file_glob: true
  file: deploy/*
  skip_cleanup: true
  overwrite: true
  on:
    tags: true
    repo: NREL/EnergyPlusRegressionTool
  skip_cleanup: 'true'
